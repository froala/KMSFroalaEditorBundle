!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("FroalaEditor")):"function"==typeof define&&define.amd?define(["FroalaEditor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";(e=e&&e.hasOwnProperty("default")?e["default"]:e).PLUGINS.fullscreen=function(o){var t,s,r,a,n=o.$;function i(){return o.$box.hasClass("fr-fullscreen")}function e(){if(o.helpers.isIOS()&&o.core.hasFocus())return o.$el.blur(),setTimeout(d,250),!1;t=o.helpers.scrollTop(),o.$box.toggleClass("fr-fullscreen"),n("body").first().toggleClass("fr-fullscreen"),o.helpers.isMobile()&&(o.$tb.data("parent",o.$tb.parent()),o.$box.prepend(o.$tb),o.$tb.data("sticky-dummy")&&o.$tb.after(o.$tb.data("sticky-dummy"))),s=o.opts.height,r=o.opts.heightMax,a=o.opts.zIndex,o.opts.height=o.o_win.innerHeight-(o.opts.toolbarInline?0:o.$tb.outerHeight()+(o.$second_tb?o.$second_tb.outerHeight():0)),o.opts.zIndex=2147483641,o.opts.heightMax=null,o.size.refresh(),o.opts.toolbarInline&&o.toolbar.showInline();for(var e=o.$box.parent();!e.first().is("body");)e.data("z-index",e.css("z-index")).data("width",e.css("width")).data("margin",e.css("margin")).data("padding",e.css("padding")).data("overflow",e.css("overflow")).css("z-index","2147483640").css("width","100%").css("margin","0px").css("padding","0px").css("overflow","visible"),e=e.parent();o.opts.toolbarContainer&&o.$box.prepend(o.$tb),o.events.trigger("charCounter.update"),o.events.trigger("codeView.update"),o.$win.trigger("scroll")}function l(){if(o.helpers.isIOS()&&o.core.hasFocus())return o.$el.blur(),setTimeout(d,250),!1;o.$box.toggleClass("fr-fullscreen"),n("body").first().toggleClass("fr-fullscreen"),o.$tb.data("parent")&&o.$tb.data("parent").prepend(o.$tb),o.$tb.data("sticky-dummy")&&o.$tb.after(o.$tb.data("sticky-dummy")),o.opts.height=s,o.opts.heightMax=r,o.opts.zIndex=a,o.size.refresh(),n(o.o_win).scrollTop(t),o.opts.toolbarInline&&o.toolbar.showInline(),o.events.trigger("charCounter.update"),o.opts.toolbarSticky&&o.opts.toolbarStickyOffset&&(o.opts.toolbarBottom?o.$tb.css("bottom",o.opts.toolbarStickyOffset).data("bottom",o.opts.toolbarStickyOffset):o.$tb.css("top",o.opts.toolbarStickyOffset).data("top",o.opts.toolbarStickyOffset));for(var e=o.$box.parent();!e.first().is("body");)e.data("z-index")&&(e.css("z-index",""),e.css("z-index")!==e.data("z-index")&&e.css("z-index",e.data("z-index")),e.removeData("z-index")),e.data("width")&&(e.css("width",""),e.css("width")!==e.data("width")&&e.css("width",e.data("width")),e.removeData("width")),e.data("margin")&&(e.css("margin",""),e.css("margin")!==e.data("margin")&&e.css("margin",e.data("margin")),e.removeData("margin")),e.data("padding")&&(e.css("padding",""),e.css("padding")!==e.data("padding")&&e.css("padding",e.data("padding")),e.removeData("padding")),e.data("overflow")?(e.css("overflow",""),e.css("overflow")!==e.data("overflow")&&e.css("overflow",e.data("overflow"))):e.css("overflow",""),e.removeData("overflow"),e=e.parent();o.opts.toolbarContainer&&n(o.opts.toolbarContainer).append(o.$tb),n(o.o_win).trigger("scroll"),o.events.trigger("codeView.update")}function d(){i()?l():e(),c(o.$tb.find('.fr-command[data-cmd="fullscreen"]'))}function c(e){var t=i();e.toggleClass("fr-active",t).attr("aria-pressed",t),e.find("> *").not(".fr-sr-only").replaceWith(t?o.icon.create("fullscreenCompress"):o.icon.create("fullscreen"))}return{_init:function(){if(!o.$wp)return!1;o.events.$on(n(o.o_win),"resize",function(){i()&&(l(),e())}),o.events.on("toolbar.hide",function(){if(i()&&o.helpers.isMobile())return!1}),o.events.on("position.refresh",function(){if(o.helpers.isIOS())return!i()}),o.events.on("destroy",function(){i()&&l()},!0)},toggle:d,refresh:c,isActive:i}},e.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),e.DefineIcon("fullscreen",{NAME:"expand",SVG_KEY:"fullscreen"}),e.DefineIcon("fullscreenCompress",{NAME:"compress",SVG_KEY:"exitFullscreen"})});